extends layout

block content
  section.project-detail
    h1= project.name
    img(src=`/images/${project.image}` alt=`${project.name}`)
    p Date de cr√©ation: #{new Date(project.date).toLocaleDateString('fr-FR')}
    p= project.description
    p Cat√©gorie: #{project.category}
    a(href="/projets") Retour aux projets

  section.comment
    h2 Commentaires
    if username
      form#commentForm(method="POST" action="/comments")
        input(type="hidden" name="projectId" value=projectId)
        textarea(name="comment" placeholder="√âcrivez votre commentaire ici..." required)
        button(type="submit") Publier
    else
      p Vous devez √™tre connect√© pour poster un commentaire.
    .comment-list
      if comments && comments.length > 0
        each comment in comments
          .comment
            .comment-header
              strong.comment-username #{comment.username}
              span.comment-date #{new Date(comment.date).toLocaleDateString('fr-FR')}
            .comment-body.comment-box
              p= comment.comment
              if comment.userId === currentUserId || username === process.env.ADMIN_USERNAME
                button.delete-button(
                  type="button"
                  data-comment-id=comment.id
                  title="Supprimer ce commentaire"
                )
                  i.fa.fa-trash
            .reactions
              - const reactionsList = ['üëç', 'üí©', '‚ù§Ô∏è', 'üòÇ']
              each emoji in reactionsList
                - const count = comment.reactions && comment.reactions[emoji] ? comment.reactions[emoji] : 0
                button(
                  type="button"
                  class="reaction-button"
                  data-comment-id=comment.id
                  data-emoji=emoji
                ) #{emoji} 
                  span.reaction-count #{count}
      else
        p Aucun commentaire pour le moment.

block scripts
  script(src="/script.js")