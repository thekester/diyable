doctype html
html(lang="fr")
  head
    meta(charset="UTF-8")
    meta(name="viewport" content="width=device-width, initial-scale=1.0")
    title= title + " - DIY able"
    link(rel="stylesheet" href="/styles.css")
  body
    header
      div.logo
        img(src="/images/logo-diyable.jpeg" alt="DIY able logo")
      nav
        ul
          li: a(href="/") Accueil
          li: a(href="/projets") Projets
          li: a(href="#about") Ã€ Propos
          li: a(href="/contact") Contact
          if username
            li
              a(href="javascript:void(0)" id="usernameDropdown" onclick="toggleDropdown()") #{username} 
              ul(id="dropdownMenu" class="dropdown-menu")
                li: a(href="/profile") Mon Profil
                li: a(href="/logout") DÃ©connexion
          else
            li: a(href="/login") 
              button(type="button" id="connexion") Connexion
    main
      section.project-detail
        h1= project.name
        img(src=`/images/${project.image}` alt=`${project.name}`)
        p Date de crÃ©ation: #{new Date(project.date).toLocaleDateString('fr-FR')}
        p= project.description
        p CatÃ©gorie: #{project.category}
        a(href="/projets") Retour aux projets
      section.comment
        h2 Commentaires
        if username
          form(method="POST" action="/comments")
            input(type="hidden" name="projectId" value=projectId)
            textarea(name="comment" placeholder="Ã‰crivez votre commentaire ici..." required)
            button(type="submit") Publier
        else
          p Vous devez Ãªtre connectÃ© pour poster un commentaire.
        .comment-list
        if comments && comments.length > 0
          each comment in comments
            .comment
              .comment-header
                strong.comment-username #{comment.username}
                span.comment-date #{comment.date}
              .comment-body.comment-box
                p= comment.comment
              .reactions
                if comment.reactions && typeof comment.reactions === 'object'
                  each value, key in comment.reactions
                    button(type="button" class="reaction-button" data-id=comment.id data-reaction=key onclick=`reactToComment(${comment.id}, '${key}')`) #{key} #{value || 0}
                else
                  button(type="button" class="reaction-button" data-id=comment.id data-reaction="ğŸ‘" onclick="reactToComment(${comment.id}, 'ğŸ‘')") ğŸ‘ 0
                  button(type="button" class="reaction-button" data-id=comment.id data-reaction="ğŸ’©" onclick="reactToComment(${comment.id}, 'ğŸ’©')") ğŸ’© 0
                  button(type="button" class="reaction-button" data-id=comment.id data-reaction="â¤ï¸" onclick="reactToComment(${comment.id}, 'â¤ï¸')") â¤ï¸ 0
                  button(type="button" class="reaction-button" data-id=comment.id data-reaction="ğŸ˜‚" onclick="reactToComment(${comment.id}, 'ğŸ˜‚')") ğŸ˜‚ 0
        else
          p Aucun commentaire pour le moment.
    footer
      p Â© 2024 DIY able - Tous droits rÃ©servÃ©s
    script(src="/script.js")
