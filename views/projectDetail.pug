doctype html
html(lang="fr")
  head
    meta(charset="UTF-8")
    meta(name="viewport" content="width=device-width, initial-scale=1.0")
    title= title + " - DIY able"
    link(rel="stylesheet" href="/styles.css")
  body
    header
      div.logo
        img(src="/images/logo-diyable.jpeg" alt="DIY able logo")
      nav
        ul
          li: a(href="/") Accueil
          li: a(href="/projets") Projets
          li: a(href="#about") À Propos
          li: a(href="/contact") Contact
          if username
            li
              a(href="javascript:void(0)" id="usernameDropdown" onclick="toggleDropdown()") #{username} 
              ul(id="dropdownMenu" class="dropdown-menu")
                li: a(href="/profile") Mon Profil
                li: a(href="/logout") Déconnexion
          else
            li: a(href="/login") 
              button(type="button" id="connexion") Connexion
    main
      section.project-detail
        h1= project.name
        img(src=`/images/${project.image}` alt=`${project.name}`)
        p Date de création: #{new Date(project.date).toLocaleDateString('fr-FR')}
        p= project.description
        p Catégorie: #{project.category}
        a(href="/projets") Retour aux projets
      section.comment
        h2 Commentaires
        if username
          form(method="POST" action="/comments")
            input(type="hidden" name="projectId" value=projectId)
            textarea(name="comment" placeholder="Écrivez votre commentaire ici..." required)
            button(type="submit") Publier
        else
          p Vous devez être connecté pour poster un commentaire.
        .comment-list
        if comments && comments.length > 0
          each comment in comments
            .comment
              .comment-header
                strong.comment-username #{comment.username}
                span.comment-date #{comment.date}
              .comment-body.comment-box
                p= comment.comment
              .reactions
                button(
                  type="button" 
                  class="reaction-button" 
                  data-comment-id=comment.id 
                  data-emoji="👍" 
                  onclick="reactToComment(event)"
                ) 👍 #{comment.reactions && comment.reactions['👍'] ? comment.reactions['👍'] : 0}
                button(
                  type="button" 
                  class="reaction-button" 
                  data-comment-id=comment.id 
                  data-emoji="💩" 
                  onclick="reactToComment(event)"
                ) 💩 #{comment.reactions && comment.reactions['💩'] ? comment.reactions['💩'] : 0}
                button(
                  type="button" 
                  class="reaction-button" 
                  data-comment-id=comment.id 
                  data-emoji="❤️" 
                  onclick="reactToComment(event)"
                ) ❤️ #{comment.reactions && comment.reactions['❤️'] ? comment.reactions['❤️'] : 0}
                button(
                  type="button" 
                  class="reaction-button" 
                  data-comment-id=comment.id 
                  data-emoji="😂" 
                  onclick="reactToComment(event)"
                ) 😂 #{comment.reactions && comment.reactions['😂'] ? comment.reactions['😂'] : 0}
        else
          p Aucun commentaire pour le moment.
    footer
      p © 2024 DIY able - Tous droits réservés
    script(src="/script.js")
